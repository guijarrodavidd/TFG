<div class="container-fluid fade-in">
  
  <header class="d-flex justify-content-between align-items-center mb-5">
    <div>
      <h2 class="fw-bold text-dark mb-0">Buenos días, <span class="text-primary">{{ usuario.nombre }}</span></h2>
      <p class="text-muted small">Resumen de actividad de {{ usuario.empresa_nombre || 'tu empresa' }}</p>
    </div>
    
  </header>

  <div class="row g-4">
    
    <div class="col-lg-8">
      
      <div class="card card-dark mb-4 text-white overflow-hidden border-0 shadow">
        <div class="card-body p-4 position-relative z-1">
          <h5 class="card-title text-white-50 text-uppercase small ls-1">Ventas este Mes</h5>
          <div class="d-flex align-items-end mt-3">
            <h1 class="display-4 fw-bold mb-0">{{ rendimiento.total | currency:'EUR':'symbol':'1.0-0' }}</h1>
            
            <span class="badge bg-white bg-opacity-25 ms-3 mb-2 fw-normal">
              <i class="bi bi-graph-up me-1"></i> {{ rendimiento.ventas }} operaciones
            </span>
          </div>
        </div>
        <div class="wave-bg"></div>
      </div>

      <h5 class="fw-bold text-dark mb-3">Ventas Recientes</h5>
      <div class="card border-0 shadow-sm rounded-4">
        <div class="card-body p-0">
          
          <div *ngIf="ventasRecientes.length === 0" class="p-4 text-center text-muted">
             No has realizado ventas recientemente.
          </div>

          <div *ngFor="let v of ventasRecientes" class="d-flex justify-content-between align-items-center p-3 border-bottom invoice-item">
            <div class="d-flex align-items-center gap-3">
              <div class="icon-box bg-light rounded-circle p-2 text-primary">
                <i class="bi bi-receipt"></i>
              </div>
              <div>
                <h6 class="mb-0 fw-bold text-dark">{{ v.cliente_nombre }}</h6>
                <small class="text-muted">{{ v.created_at | date:'dd MMM yyyy, HH:mm' }}</small>
              </div>
            </div>
            <div class="text-end">
               <span class="d-block fw-bold text-success">{{ v.total | currency:'EUR':'symbol' }}</span>
               <small class="text-muted badge bg-light text-dark border">Pagado</small>
            </div>
          </div>
        </div>
      </div>

    </div>

    <div class="col-lg-4">
      
      <div class="row g-3 mb-4">
        <div class="col-6">
          <div class="card border-0 shadow-sm p-3 text-center h-100 card-hover">
            <h3 class="fw-bold mb-0 text-primary">{{ rendimiento.ventas }}</h3>
            <small class="text-muted text-uppercase" style="font-size: 0.7rem;">Ventas Mes</small>
          </div>
        </div>
        <div class="col-6">
          <div class="card border-0 shadow-sm p-3 text-center h-100 card-hover">
            <h3 class="fw-bold mb-0 text-info">{{ equipo.length + 1 }}</h3>
            <small class="text-muted text-uppercase" style="font-size: 0.7rem;">Miembros</small>
          </div>
        </div>
      </div>

      <div class="card border-0 shadow-sm rounded-4 p-3 bg-white h-100">
        <div class="d-flex justify-content-between align-items-center mb-4">
           <h5 class="fw-bold mb-0">Tu Equipo</h5>
           <span class="badge bg-light text-dark">{{ equipo.length }} compañeros</span>
        </div>
        
        <div class="d-flex flex-column gap-3">
          
          <div *ngIf="equipo.length === 0" class="text-center text-muted small py-3">
            No hay más miembros en tu empresa.
          </div>

          <div *ngFor="let miembro of equipo" class="d-flex align-items-center gap-3 p-2 rounded hover-bg">
            <img [src]="miembro.avatar" class="rounded-circle shadow-sm" width="40" height="40">
            <div>
              <h6 class="mb-0 fw-bold text-dark" style="font-size: 0.95rem;">{{ miembro.nombre }}</h6>
              <small class="text-muted" style="font-size: 0.8rem;">{{ miembro.rol }}</small>
            </div>
            <div class="ms-auto">
               <span class="d-inline-block rounded-circle bg-success" style="width: 8px; height: 8px;"></span>
            </div>
          </div>

        </div>
      </div>

    </div>
  </div>
</div>