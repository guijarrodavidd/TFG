<div class="container py-5">
  <div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 1060;">
    <div class="toast align-items-center text-white border-0 shadow show" 
         [ngClass]="{'bg-success': toastTipo === 'success', 'bg-danger': toastTipo === 'error', 'bg-warning': toastTipo === 'warning'}"
         role="alert" *ngIf="toastVisible">
      <div class="d-flex">
        <div class="toast-body fw-bold">
          <i class="bi me-2" [ngClass]="{'bi-check-circle-fill': toastTipo === 'success', 'bi-exclamation-triangle-fill': toastTipo === 'error' || toastTipo === 'warning'}"></i>
          {{ toastMensaje }}
        </div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" (click)="toastVisible = false"></button>
      </div>
    </div>
  </div>

  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="card border-0 shadow-lg rounded-4 p-4">
        <h2 class="fw-bold mb-4 text-center">Configura tu Empresa</h2>
        
        <form (ngSubmit)="registrarEmpresa()">
          <div class="mb-3">
            <label class="form-label text-muted small fw-bold">NOMBRE DE LA EMPRESA</label>
            <input type="text" class="form-control bg-light border-0 py-2" [(ngModel)]="empresa.nombre" name="nombre" placeholder="Ej: Mi Negocio S.L." required>
          </div>

          <div class="mb-3">
            <label class="form-label text-muted small fw-bold">CIF (B + 8 números)</label>
            <input type="text" class="form-control bg-light border-0 py-2" 
                   [(ngModel)]="empresa.cif" name="cif" 
                   placeholder="B12345678" 
                   (keyup)="validarDatosLocales()"
                   [ngClass]="{'is-invalid': cifInvalido}" required>
            <div class="invalid-feedback" *ngIf="cifInvalido">
              El CIF debe ser una B seguida de 8 números.
            </div>
          </div>

          <div class="mb-3">
            <label class="form-label text-muted small fw-bold">TELÉFONO (9 números)</label>
            <input type="text" class="form-control bg-light border-0 py-2" 
                   [(ngModel)]="empresa.telefono" name="telefono" 
                   placeholder="600123456"
                   (keyup)="validarDatosLocales()"
                   [ngClass]="{'is-invalid': telfInvalido}">
            <div class="invalid-feedback" *ngIf="telfInvalido">
              El teléfono debe tener exactamente 9 dígitos.
            </div>
          </div>

          <div class="mb-4">
            <label class="form-label text-muted small fw-bold">DIRECCIÓN</label>
            <input type="text" class="form-control bg-light border-0 py-2" [(ngModel)]="empresa.direccion" name="direccion" placeholder="Calle Ejemplo 123">
          </div>

          <button type="submit" class="btn btn-primary w-100 py-2 rounded-pill fw-bold shadow-sm" 
                  [disabled]="cargando || cifInvalido || telfInvalido">
            <span *ngIf="!cargando">CREAR EMPRESA</span>
            <span *ngIf="cargando" class="spinner-border spinner-border-sm me-2"></span>
          </button>
        </form>
      </div>
    </div>
  </div>
</div>